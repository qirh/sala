{% extends "ar/layout.html" %}
{% block body %}

    <!--src: https://www.sitepoint.com/creating-simple-line-bar-charts-using-d3-js/ -->

    <style>
        .axis path, .axis line {
            fill: none;
            stroke: #777;
            shape-rendering: crispEdges;
        }
        .axis text {
            font-family: 'Arial';
            font-size: 13px;
        }
        .tick {
            stroke-dasharray: 1, 2;
        }
        .bar {
            fill: FireBrick;
        }
    </style>
    <svg id="visualisation" width="1000" height="500"></svg>
    <!-- load the d3.js library -->
    <script src="https://d3js.org/d3.v3.min.js"></script>

    <script>

        InitChart();

        function InitChart() {

            var lineData = [{'x': 1, 'y': 1.22}, {'x': 2, 'y': 3.144}, {'x': 3, 'y': 2.50}, {
                'x': 4,
                'y': 3.00
            }, {'x': 5, 'y': 2.81}, {'x': 6, 'y': 3.53}, {'x': 7, 'y': 3.9}, {'x': 8, 'y': 3.75}, {
                'x': 9,
                'y': 3.32
            }, {'x': 10, 'y': 0.62}, {'x': 11, 'y': 1.50}, {'x': 12, 'y': 2.34}, {'x': 13, 'y': 2.30}, {
                'x': 14,
                'y': 2.00
            }, {'x': 15, 'y': 2.44}, {'x': 16, 'y': 2.25}, {'x': 17, 'y': 2.85}, {'x': 18, 'y': 3.12}, {
                'x': 19,
                'y': 3.5
            }, {'x': 20, 'y': 3.78}];

            var vis = d3.select("#visualisation"),
                WIDTH = 1000,
                HEIGHT = 500,
                MARGINS = {
                    top: 50,
                    right: 50,
                    bottom: 50,
                    left: 50
                },
                xRange = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([1, 20]),

                yRange = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([0, 4]),

                xAxis = d3.svg.axis()
                    .scale(xRange)
                    .tickSize(5)
                    .tickSubdivide(true),

                yAxis = d3.svg.axis()
                    .scale(yRange)
                    .tickSize(5)
                    .orient("left")
                    .tickSubdivide(true);

            vis.append("text")
                .attr("class", "x label")
                .attr("text-anchor", "end")
                .attr("x", WIDTH / 2)
                .attr("y", HEIGHT - 10)
                .text("الترم");

            vis.append("text")
                .attr("class", "y label")
                .attr("text-anchor", "end")
                .attr("y", 20)
                .attr("x", -250)
                .attr("transform", "rotate(-90)")
                .text("الدرجات");


            vis.append("svg:g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")")
                .text("الترم")
                .call(xAxis);

            vis.append("svg:g")
                .attr("class", "y axis")
                .attr("transform", "translate(" + (MARGINS.left) + ",0)")
                .text("الدرجات")
                .call(yAxis);


            var lineFunc = d3.svg.line()
                .x(function (d) {
                    return xRange(d.x);
                })
                .y(function (d) {
                    return yRange(d.y);
                })
                .interpolate('linear');

            vis.append("svg:path")
                .attr("d", lineFunc(lineData))
                .attr("stroke", "blue")
                .attr("stroke-width", 2)
                .attr("fill", "none");

        }

    </script>
{% endblock %}
